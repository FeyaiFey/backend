import{a1 as R,d as H,p as f,X as I,af as G,S as B,O as Q,Q as X,u as l,o as x,c as v,t as g,n as r,f as L,ag as J,r as T,y as b,e as K,w as i,g as e,i as s,C as w,_ as U}from"./index--cZ_FbqS.js";const W=()=>R.get({url:"bi/caiwu"}),O=H({__name:"CountTo",props:{startVal:f.number.def(0),endVal:f.number.def(2021),duration:f.number.def(3e3),autoplay:f.bool.def(!0),decimals:f.number.validate($=>$>=0).def(0),decimal:f.string.def("."),separator:f.string.def(","),prefix:f.string.def(""),suffix:f.string.def(""),useEasing:f.bool.def(!0),easingFn:{type:Function,default($,A,n,m){return n*(-Math.pow(2,-10*$/m)+1)*1024/1023+A}}},emits:["mounted","callback"],setup($,{expose:A,emit:n}){const{getPrefixCls:m}=L(),C=m("count-to"),o=$,k=n,h=u=>{const{decimals:p,decimal:D,separator:d,suffix:V,prefix:P}=o;u=Number(u).toFixed(p),u+="";const j=u.split(".");let E=j[0];const z=j.length>1?D+j[1]:"",q=/(\d+)(\d{3})/;if(d&&!J(d))for(;q.test(E);)E=E.replace(q,"$1"+d+"$2");return P+E+z+V},t=I({localStartVal:o.startVal,displayValue:h(o.startVal),printVal:null,paused:!1,localDuration:o.duration,startTime:null,timestamp:null,remaining:null,rAF:null}),S=G(t,"displayValue");B(()=>{o.autoplay&&a(),k("mounted")});const c=Q(()=>o.startVal>o.endVal);X([()=>o.startVal,()=>o.endVal],()=>{o.autoplay&&a()});const a=()=>{const{startVal:u,duration:p}=o;t.localStartVal=u,t.startTime=null,t.localDuration=p,t.paused=!1,t.rAF=requestAnimationFrame(y)},N=()=>{t.paused?(_(),t.paused=!1):(M(),t.paused=!0)},M=()=>{cancelAnimationFrame(t.rAF)},_=()=>{t.startTime=null,t.localDuration=+t.remaining,t.localStartVal=+t.printVal,requestAnimationFrame(y)},F=()=>{t.startTime=null,cancelAnimationFrame(t.rAF),t.displayValue=h(o.startVal)},y=u=>{const{useEasing:p,easingFn:D,endVal:d}=o;t.startTime||(t.startTime=u),t.timestamp=u;const V=u-t.startTime;t.remaining=t.localDuration-V,p?l(c)?t.printVal=t.localStartVal-D(V,0,t.localStartVal-d,t.localDuration):t.printVal=D(V,t.localStartVal,d-t.localStartVal,t.localDuration):l(c)?t.printVal=t.localStartVal-(t.localStartVal-d)*(V/t.localDuration):t.printVal=t.localStartVal+(d-t.localStartVal)*(V/t.localDuration),l(c)?t.printVal=t.printVal<d?d:t.printVal:t.printVal=t.printVal>d?d:t.printVal,t.displayValue=h(t.printVal),V<t.localDuration?t.rAF=requestAnimationFrame(y):k("callback")};return A({pauseResume:N,reset:F,start:a,pause:M}),(u,p)=>(x(),v("span",{class:r(l(C))},g(S.value),3))}}),Y={class:"flex flex-col justify-between"},Z={key:0,class:"green"},tt={key:1,class:"red"},et={class:"flex flex-col justify-between"},at={key:0,class:"green"},lt={key:1,class:"red"},st={class:"flex flex-col justify-between"},nt={key:0,class:"green"},ot={key:1,class:"red"},it={class:"flex flex-col justify-between"},rt={key:0,class:"green"},ct={key:1,class:"red"},ut=H({__name:"PanelGroup",setup($){const{getPrefixCls:A}=L(),n=A("panel"),m=T(!0),C=T(0),o=T(0),k=T(0),h=T(0),t=T(0),S=T(0);return B(async()=>{try{const c=await W();C.value=c.data.find(a=>a.MONTH==="ThisMonth").qty,k.value=c.data.find(a=>a.MONTH==="ThisMonth").amount,t.value=c.data.find(a=>a.MONTH==="ThisMonth").price,o.value=Math.round((C.value-c.data.find(a=>a.MONTH==="LastMonth").qty)/c.data.find(a=>a.MONTH==="LastMonth").qty*1e4)/100,h.value=Math.round((k.value-c.data.find(a=>a.MONTH==="LastMonth").amount)/c.data.find(a=>a.MONTH==="LastMonth").amount*1e4)/100,S.value=Math.round((t.value-c.data.find(a=>a.MONTH==="LastMonth").price)/c.data.find(a=>a.MONTH==="LastMonth").price*1e4)/100}catch(c){console.error("加载财务数据失败！:",c)}m.value=!1}),(c,a)=>{const N=b("Icon"),M=b("CaretTop"),_=b("el-icon"),F=b("CaretBottom"),y=b("ElSkeleton"),u=b("ElCard"),p=b("ElCol"),D=b("ElRow");return x(),K(D,{gutter:20,justify:"space-between",class:r(l(n))},{default:i(()=>[e(p,{xl:6,lg:6,md:12,sm:12,xs:24},{default:i(()=>[e(u,{shadow:"hover",class:"mb-20px"},{default:i(()=>[e(y,{loading:m.value,animated:"",rows:2},{default:i(()=>[s("div",{class:r(`${l(n)}__item flex justify-between`)},[s("div",null,[s("div",{class:r(`${l(n)}__item--icon ${l(n)}__item--peoples p-16px inline-block rounded-6px`)},[e(N,{icon:"typcn:shopping-cart",size:50})],2)]),s("div",Y,[s("div",{class:r(`${l(n)}__item--text text-20px text-gray-500 text-right`)},"采购总量(PCS)",2),e(l(O),{class:"text-20px font-700 text-right","start-val":0,"end-val":C.value,duration:1500},null,8,["end-val"]),s("div",{class:r(`${l(n)}__item--text text-13px text-gray-500 text-right`)},[a[0]||(a[0]=s("span",null,"相比上月",-1)),o.value>0?(x(),v("span",Z,[w(g(o.value)+"% ",1),e(_,null,{default:i(()=>[e(M)]),_:1})])):(x(),v("span",tt,[w(g(o.value)+"% ",1),e(_,null,{default:i(()=>[e(F)]),_:1})]))],2)])],2)]),_:1},8,["loading"])]),_:1})]),_:1}),e(p,{xl:6,lg:6,md:12,sm:12,xs:24},{default:i(()=>[e(u,{shadow:"hover",class:"mb-20px"},{default:i(()=>[e(y,{loading:m.value,animated:"",rows:2},{default:i(()=>[s("div",{class:r(`${l(n)}__item flex justify-between`)},[s("div",null,[s("div",{class:r(`${l(n)}__item--icon ${l(n)}__item--money p-16px inline-block rounded-6px`)},[e(N,{icon:"fa:rmb",size:50})],2)]),s("div",et,[s("div",{class:r(`${l(n)}__item--text text-20px text-gray-500 text-right`)},"采购金额(RMB)",2),e(l(O),{class:"text-20px font-700 text-right","start-val":0,"end-val":k.value,duration:1500},null,8,["end-val"]),s("div",{class:r(`${l(n)}__item--text text-13px text-gray-500 text-right`)},[a[1]||(a[1]=s("span",null,"相比上月",-1)),h.value>0?(x(),v("span",at,[w(g(h.value)+"% ",1),e(_,null,{default:i(()=>[e(M)]),_:1})])):(x(),v("span",lt,[w(g(h.value)+"% ",1),e(_,null,{default:i(()=>[e(F)]),_:1})]))],2)])],2)]),_:1},8,["loading"])]),_:1})]),_:1}),e(p,{xl:6,lg:6,md:12,sm:12,xs:24},{default:i(()=>[e(u,{shadow:"hover",class:"mb-20px"},{default:i(()=>[e(y,{loading:m.value,animated:"",rows:2},{default:i(()=>[s("div",{class:r(`${l(n)}__item flex justify-between`)},[s("div",null,[s("div",{class:r(`${l(n)}__item--icon ${l(n)}__item--price p-16px inline-block rounded-6px`)},[e(N,{icon:"ion:pricetag-sharp",size:50})],2)]),s("div",st,[s("div",{class:r(`${l(n)}__item--text text-20px text-gray-500 text-right`)},"平均单价",2),e(l(O),{class:"text-20px font-700 text-right","start-val":0,"end-val":t.value,duration:1500},null,8,["end-val"]),s("div",{class:r(`${l(n)}__item--text text-13px text-gray-500 text-right`)},[a[2]||(a[2]=s("span",null,"相比上月",-1)),S.value>0?(x(),v("span",nt,[w(g(S.value)+"% ",1),e(_,null,{default:i(()=>[e(M)]),_:1})])):(x(),v("span",ot,[w(g(S.value)+"% ",1),e(_,null,{default:i(()=>[e(F)]),_:1})]))],2)])],2)]),_:1},8,["loading"])]),_:1})]),_:1}),e(p,{xl:6,lg:6,md:12,sm:12,xs:24},{default:i(()=>[e(u,{shadow:"hover",class:"mb-20px"},{default:i(()=>[e(y,{loading:m.value,animated:"",rows:2},{default:i(()=>[s("div",{class:r(`${l(n)}__item flex justify-between`)},[s("div",null,[s("div",{class:r(`${l(n)}__item--icon ${l(n)}__item--peoples p-16px inline-block rounded-6px`)},[e(N,{icon:"typcn:shopping-cart",size:50})],2)]),s("div",it,[s("div",{class:r(`${l(n)}__item--text text-20px text-gray-500 text-right`)},"本月采购(PCS)",2),e(l(O),{class:"text-20px font-700 text-right","start-val":0,"end-val":C.value,duration:1500},null,8,["end-val"]),s("div",{class:r(`${l(n)}__item--text text-13px text-gray-500 text-right`)},[a[3]||(a[3]=s("span",null,"相比上月",-1)),o.value>0?(x(),v("span",rt,[w(g(o.value)+"% ",1),e(_,null,{default:i(()=>[e(M)]),_:1})])):(x(),v("span",ct,[w(g(o.value)+"% ",1),e(_,null,{default:i(()=>[e(F)]),_:1})]))],2)])],2)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["class"])}}}),pt=U(ut,[["__scopeId","data-v-93fafe5a"]]);export{pt as default};
